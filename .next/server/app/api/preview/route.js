"use strict";(()=>{var e={};e.id=963,e.ids=[963],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},7261:e=>{e.exports=require("node:util")},9078:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var n={};r.r(n),r.d(n,{POST:()=>l});var o=r(9303),s=r(8716),i=r(3131),a=r(7070),u=r(5456),p=r(9730);async function l(e){try{await (0,u.v1)()}catch{return a.NextResponse.json({error:"UNAUTHORIZED"},{status:401})}let t=await e.json(),r=(0,p.mf)(t);return a.NextResponse.json({key:r})}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/preview/route",pathname:"/api/preview",filename:"route",bundlePath:"app/api/preview/route"},resolvedPagePath:"C:\\Users\\kompik\\Documents\\VScode\\sezony\\src\\app\\api\\preview\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:x,serverHooks:f}=c,m="/api/preview/route";function w(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},5456:(e,t,r)=>{r.d(t,{Gg:()=>p,kt:()=>u,sV:()=>i,v1:()=>l});var n=r(1615),o=r(6091),s=r(6176);let i="sezony_session";function a(){let e=process.env.AUTH_SECRET;if(!e)throw Error("AUTH_SECRET is not set");return new TextEncoder().encode(e)}async function u(e){let t=a();return new o.N({email:e.email}).setProtectedHeader({alg:"HS256"}).setSubject(e.id).setIssuedAt().setExpirationTime("7d").sign(t)}async function p(){let e=(0,n.cookies)(),t=e.get(i)?.value;if(!t)return null;try{let{payload:e}=await (0,s._)(t,a());return{id:e.sub,email:e.email}}catch{return null}}async function l(){let e=await p();if(!e)throw Error("UNAUTHORIZED");return e}},9730:(e,t,r)=>{r.d(t,{N$:()=>u,Yj:()=>p,mf:()=>i,oD:()=>a});let n=new Map,o=new Map;function s(e){for(let[t,r]of n.entries())r.expiresAt<=e&&n.delete(t);for(let[t,r]of o.entries())r.expiresAt<=e&&o.delete(t)}function i(e,t=6e5){let r=Date.now();s(r);let o=crypto.randomUUID();return n.set(o,{data:e,expiresAt:r+t}),o}function a(e){let t=n.get(e);return t?t.expiresAt<=Date.now()?(n.delete(e),null):t.data:null}function u(e,t=6e5){let r=Date.now();s(r);let n=crypto.randomUUID();return o.set(n,{data:e,expiresAt:r+t}),n}function p(e){let t=o.get(e);return t?t.expiresAt<=Date.now()?(o.delete(e),null):t.data:null}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,529,972],()=>r(9078));module.exports=n})();