(()=>{var e={};e.id=101,e.ids=[101],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},7261:e=>{"use strict";e.exports=require("node:util")},1799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u}),r(4466),r(3384),r(5866);var n=r(3191),s=r(8716),o=r(7922),i=r.n(o),l=r(5231),a={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);r.d(t,a);let u=["",{children:["projects",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4466)),"C:\\Users\\kompik\\Documents\\VScode\\sezony\\src\\app\\projects\\[slug]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,3384)),"C:\\Users\\kompik\\Documents\\VScode\\sezony\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\kompik\\Documents\\VScode\\sezony\\src\\app\\projects\\[slug]\\page.tsx"],d="/projects/[slug]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/projects/[slug]/page",pathname:"/projects/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},9465:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3114:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2481,23)),Promise.resolve().then(r.bind(r,8935))},6650:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23)),Promise.resolve().then(r.bind(r,7532))},7532:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(326),s=r(7577);function o(){let[e,t]=(0,s.useState)(!1);return e?n.jsx("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Наверх",className:"fixed bottom-6 right-6 z-50 rounded-full border border-moss-600/60 bg-moss-800/90 px-4 py-3 text-xs uppercase tracking-[0.3em] text-mint-500 shadow-lg transition hover:-translate-y-0.5 hover:bg-moss-700/90",children:"Наверх"}):null}},8935:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(326),s=r(7577),o=r(6226);function i({images:e,title:t}){let[r,i]=(0,s.useState)(null);return e.length?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map((e,r)=>(0,n.jsxs)("button",{type:"button",onClick:()=>i(r),className:"group relative aspect-[4/3] w-full overflow-hidden rounded-md border border-moss-600/60",children:[n.jsx(o.default,{src:e,alt:`${t} фото ${r+1}`,fill:!0,className:"object-cover transition duration-300 group-hover:scale-105",sizes:"(min-width: 1024px) 45vw, 90vw"}),n.jsx("div",{className:"absolute inset-0 bg-black/0 transition group-hover:bg-black/20"})]},`${e}-${r}`))}),null!==r?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:[n.jsx("button",{type:"button",className:"absolute inset-0 h-full w-full cursor-zoom-out",onClick:()=>i(null),"aria-label":"Закрыть"}),(0,n.jsxs)("div",{className:"relative z-10 flex w-full max-w-6xl flex-col items-center justify-center gap-4",children:[n.jsx("img",{src:e[r],alt:`${t} фото ${r+1}`,className:"max-h-[85vh] w-auto max-w-[90vw] rounded-md border border-moss-600/60 object-contain"}),(0,n.jsxs)("div",{className:"flex w-full max-w-[90vw] items-center justify-between text-sm text-leaf-200/80",children:[(0,n.jsxs)("span",{children:[r+1," / ",e.length]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>i(t=>null===t?t:(t-1+e.length)%e.length),className:"rounded-full border border-moss-600/70 px-4 py-2",children:"Назад"}),n.jsx("button",{type:"button",onClick:()=>i(t=>null===t?t:(t+1)%e.length),className:"rounded-full border border-moss-600/70 px-4 py-2",children:"Вперед"})]})]})]})]}):null]}):null}},8585:(e,t,r)=>{"use strict";var n=r(1085);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},1085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return n.RedirectType},notFound:function(){return s.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(3953),s=r(6399);class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return s},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return p},isRedirectError:function(){return d},permanentRedirect:function(){return c},redirect:function(){return u}});let s=r(4580),o=r(2934),i=r(8586),l="NEXT_REDIRECT";function a(e,t,r){void 0===r&&(r=i.RedirectStatusCode.TemporaryRedirect);let n=Error(l);n.digest=l+";"+t+";"+e+";"+r+";";let o=s.requestAsyncStorage.getStore();return o&&(n.mutableCookies=o.mutableCookies),n}function u(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw a(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw a(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.PermanentRedirect)}function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,s]=e.digest.split(";",4),o=Number(s);return t===l&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(o)&&o in i.RedirectStatusCode}function p(e){return d(e)?e.digest.split(";",3)[2]:null}function m(e){if(!d(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!d(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>u});var n=r(9510),s=r(3634),o=r.n(s);r(5023);var i=r(7371);function l(){return n.jsx("header",{className:"w-full border-b border-moss-700/70 bg-moss-900/70 backdrop-blur",children:n.jsx("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-3 md:px-10",children:(0,n.jsxs)("div",{className:"flex items-center gap-3 text-mint-500",children:[n.jsx(i.default,{href:"/",className:"group inline-flex",children:n.jsx("img",{src:"/uploads/logo.jpg",alt:"СЕЗОНЫ",className:"h-16 w-16 shrink-0 rounded-md border border-moss-600/60 bg-moss-800/80 p-1 object-cover transition-transform duration-200 ease-out group-hover:scale-105"})}),n.jsx("a",{href:"https://t.me/sezons_mgn",className:"text-sm uppercase tracking-[0.3em] hover:underline underline-offset-4",target:"_blank",rel:"noreferrer",children:"Ссылка на наш телеграм канал"})]})})})}let a=(0,r(8570).createProxy)(String.raw`C:\Users\kompik\Documents\VScode\sezony\src\components\BackToTopButton.tsx#default`),u={title:"СЕЗОНЫ - студия ландшафтного дизайна и сад растений",description:"Мастерская полного цикла: создаем сады от первого эскиза до финального штриха.",icons:{icon:"/icon.svg"}};function c({children:e}){return n.jsx("html",{lang:"ru",children:(0,n.jsxs)("body",{className:`${o().variable} font-sans`,children:[n.jsx(l,{}),e,n.jsx(a,{})]})})}},4466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,dynamic:()=>c});var n=r(9510),s=r(7710),o=r(8585),i=r(3538),l=r(5456),a=r(9730);let u=(0,r(8570).createProxy)(String.raw`C:\Users\kompik\Documents\VScode\sezony\src\components\LightboxGallery.tsx#default`),c="force-dynamic";function d(e){try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function p(e){if(void 0===e)return null;try{let t=JSON.parse(e);return Array.isArray(t)?t:null}catch{return null}}async function m({params:e,searchParams:t}){let r=await i._.project.findUnique({where:{slug:e.slug}}),c="1"===t.preview,m=c&&t.previewKey?(0,a.oD)(t.previewKey):null;r?(r.isPublished||c||(0,o.notFound)(),r.isPublished||!c||await (0,l.Gg)()||(0,o.notFound)()):(c||(0,o.notFound)(),await (0,l.Gg)()||(0,o.notFound)(),m||t.title||t.coverImage||(0,o.notFound)());let f=c&&t.coverImage||null,x=c?p(t.galleryImages):null,h=c?p(t.tags):null,g=c&&m?.title||c&&t.title||r?.title||"",b=c&&m?.shortDescription||c&&t.shortDescription||r?.shortDescription||"",v=c&&m?.fullDescription||c&&t.fullDescription||r?.fullDescription||"",y=c?m?.location??t.location??null:r?.location||null,j=c?m?.year??(t.year?Number(t.year):null):r?.year??null,w=c&&m?.coverImage||f||r?.coverImage||"",N=c&&m?.galleryImages||(null!==x?x:d(r?.galleryImages||"[]")),_=c&&m?.tags||(null!==h?h:d(r?.tags||"[]"));return(0,n.jsxs)("main",{className:"mx-auto max-w-6xl space-y-12 px-4 pb-24 pt-10 md:px-10",children:[n.jsx("section",{className:"section-shell p-8 md:p-12",children:(0,n.jsxs)("div",{className:"grid gap-8 md:grid-cols-[1.2fr_0.8fr] md:items-center",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[n.jsx("h1",{className:"text-3xl text-mint-500 md:text-4xl",children:g}),n.jsx("p",{className:"text-base text-leaf-200/80",children:b}),n.jsx("div",{className:"flex flex-wrap gap-3 text-xs uppercase tracking-[0.2em] text-mint-400",children:_.map(e=>n.jsx("span",{className:"rounded-full border border-moss-600/60 px-3 py-1",children:e},e))}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-leaf-200/70",children:[y?(0,n.jsxs)("span",{children:["Локация: ",y]}):null,j?(0,n.jsxs)("span",{children:["Год: ",j]}):null]})]}),n.jsx("div",{className:"relative aspect-[4/3] w-full overflow-hidden rounded-md border border-moss-600/60",children:w?n.jsx(s.default,{src:w,alt:g||"Обложка проекта",fill:!0,className:"object-cover",sizes:"(min-width: 1024px) 40vw, 90vw"}):n.jsx("div",{className:"flex h-full w-full items-center justify-center text-sm text-leaf-200/60",children:"Обложка не добавлена"})})]})}),(0,n.jsxs)("section",{className:"space-y-6",children:[n.jsx("h2",{className:"text-2xl text-mint-500",children:"Описание проекта"}),n.jsx("p",{className:"whitespace-pre-line text-sm text-leaf-200/80 md:text-base",children:v})]}),(0,n.jsxs)("section",{className:"space-y-6",children:[n.jsx("h2",{className:"text-2xl text-mint-500",children:"Галерея"}),n.jsx(u,{images:N,title:g})]})]})}},5456:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>u,kt:()=>a,sV:()=>i,v1:()=>c});var n=r(1615),s=r(6091),o=r(6176);let i="sezony_session";function l(){let e=process.env.AUTH_SECRET;if(!e)throw Error("AUTH_SECRET is not set");return new TextEncoder().encode(e)}async function a(e){let t=l();return new s.N({email:e.email}).setProtectedHeader({alg:"HS256"}).setSubject(e.id).setIssuedAt().setExpirationTime("7d").sign(t)}async function u(){let e=(0,n.cookies)(),t=e.get(i)?.value;if(!t)return null;try{let{payload:e}=await (0,o._)(t,l());return{id:e.sub,email:e.email}}catch{return null}}async function c(){let e=await u();if(!e)throw Error("UNAUTHORIZED");return e}},9730:(e,t,r)=>{"use strict";r.d(t,{N$:()=>a,Yj:()=>u,mf:()=>i,oD:()=>l});let n=new Map,s=new Map;function o(e){for(let[t,r]of n.entries())r.expiresAt<=e&&n.delete(t);for(let[t,r]of s.entries())r.expiresAt<=e&&s.delete(t)}function i(e,t=6e5){let r=Date.now();o(r);let s=crypto.randomUUID();return n.set(s,{data:e,expiresAt:r+t}),s}function l(e){let t=n.get(e);return t?t.expiresAt<=Date.now()?(n.delete(e),null):t.data:null}function a(e,t=6e5){let r=Date.now();o(r);let n=crypto.randomUUID();return s.set(n,{data:e,expiresAt:r+t}),n}function u(e){let t=s.get(e);return t?t.expiresAt<=Date.now()?(s.delete(e),null):t.data:null}},3538:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var n=r(3524);let s=global.prisma||new n.PrismaClient},7026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(6621);let s=e=>[{type:"image/svg+xml",sizes:"any",url:(0,n.fillMetadataSegment)(".",e.params,"icon.svg")+"?bac9877cd30f1e51"}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,529,995,621,610],()=>r(1799));module.exports=n})();