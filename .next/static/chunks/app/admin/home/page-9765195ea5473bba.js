(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{3590:function(t,e,i){Promise.resolve().then(i.bind(i,8970)),Promise.resolve().then(i.bind(i,7803)),Promise.resolve().then(i.bind(i,891))},8970:function(t,e,i){"use strict";i.d(e,{default:function(){return a}});var o=i(7437);function r(t,e){let i=t.get(e);return"string"==typeof i?i:""}function n(t,e){return r(t,e).split(/\r?\n/).map(t=>t.trim()).filter(Boolean)}function a(t){let{baseContent:e}=t;async function i(t){let i=t.currentTarget.form;if(!i)return;let o=function(t,e){let i=e.intro.cards.map((e,i)=>({title:r(t,"intro.cards.".concat(i,".title")),text:r(t,"intro.cards.".concat(i,".text"))})),o=e.principles.items.map((e,i)=>({title:r(t,"principles.items.".concat(i,".title")),description:r(t,"principles.items.".concat(i,".description"))})),a=e.faq.items.map((e,i)=>({question:r(t,"faq.items.".concat(i,".question")),answer:r(t,"faq.items.".concat(i,".answer"))}));return{hero:{title:r(t,"hero.title"),description:r(t,"hero.description"),primaryCtaText:r(t,"hero.primaryCtaText"),primaryCtaUrl:r(t,"hero.primaryCtaUrl"),secondaryCtaText:r(t,"hero.secondaryCtaText"),secondaryCtaUrl:r(t,"hero.secondaryCtaUrl"),imageUrl:r(t,"hero.imageUrl"),imageAlt:r(t,"hero.imageAlt")},intro:{eyebrow:r(t,"intro.eyebrow"),title:r(t,"intro.title"),subtitle:r(t,"intro.subtitle"),cards:i,note:r(t,"intro.note")},about:{eyebrow:r(t,"about.eyebrow"),title:r(t,"about.title"),subtitle:r(t,"about.subtitle"),heading:r(t,"about.heading"),paragraphs:function(t,e){let i=r(t,e).trim();return i?i.split(/\r?\n\s*\r?\n/).map(t=>t.trim()).filter(Boolean):[]}(t,"about.paragraphs"),highlight:r(t,"about.highlight"),imageUrl:r(t,"about.imageUrl"),imageAlt:r(t,"about.imageAlt")},principles:{eyebrow:r(t,"principles.eyebrow"),title:r(t,"principles.title"),subtitle:r(t,"principles.subtitle"),items:o},composition:{eyebrow:r(t,"composition.eyebrow"),title:r(t,"composition.title"),subtitle:r(t,"composition.subtitle"),label:r(t,"composition.label"),primaryTitle:r(t,"composition.primaryTitle"),primaryItems:n(t,"composition.primaryItems"),optionalTitle:r(t,"composition.optionalTitle"),optionalItems:n(t,"composition.optionalItems"),additionalTitle:r(t,"composition.additionalTitle"),additionalItems:n(t,"composition.additionalItems"),ctaText:r(t,"composition.ctaText"),ctaUrl:r(t,"composition.ctaUrl")},projects:{eyebrow:r(t,"projects.eyebrow"),title:r(t,"projects.title"),subtitle:r(t,"projects.subtitle")},faq:{eyebrow:r(t,"faq.eyebrow"),title:r(t,"faq.title"),subtitle:r(t,"faq.subtitle"),items:a},contact:{eyebrow:r(t,"contact.eyebrow"),title:r(t,"contact.title"),subtitle:r(t,"contact.subtitle")}}}(new FormData(i),e);try{let t=await fetch("/api/home-preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),e=await t.json();if(t.ok&&e.key){let t=new URL("/",window.location.origin);t.searchParams.set("preview","1"),t.searchParams.set("previewKey",e.key),window.open(t.toString(),"_blank","noopener,noreferrer");return}}catch(t){}window.open("/","_blank","noopener,noreferrer")}return(0,o.jsx)("button",{type:"button",onClick:i,className:"rounded-md border border-mint-500 bg-moss-800/90 px-6 py-3 text-sm font-medium text-mint-500",children:"Предпросмотр"})}},7803:function(t,e,i){"use strict";i.d(e,{default:function(){return n}});var o=i(7437),r=i(2265);function n(t){let{name:e,defaultValue:i="",placeholder:n="URL картинки"}=t,[a,s]=(0,r.useState)(i),[l,c]=(0,r.useState)(!1);async function u(t){if(!t)return;c(!0);let e=new FormData;e.append("file",t);try{let t=await fetch("/api/uploads",{method:"POST",body:e}),i=await t.json();t.ok&&i.url&&s(i.url)}finally{c(!1)}}return(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("input",{name:e,value:a,onChange:t=>s(t.target.value),placeholder:n,className:"w-full rounded-md border border-moss-600/60 bg-moss-800/80 px-4 py-3 text-sm"}),(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:t=>{var e;return u((null===(e=t.target.files)||void 0===e?void 0:e[0])||null)},className:"w-full text-xs"}),l?(0,o.jsx)("div",{className:"text-xs text-leaf-200/70",children:"Загрузка..."}):null]})}},891:function(t,e,i){"use strict";i.d(e,{default:function(){return a}});var o=i(7437),r=i(2265),n=i(5475);function a(){let t=(0,n.useSearchParams)(),e=(0,n.useRouter)(),i="1"===t.get("saved"),[a,s]=(0,r.useState)(i);return((0,r.useEffect)(()=>{if(!i)return;s(!0);let o=setTimeout(()=>{s(!1);let i=new URLSearchParams(t.toString());i.delete("saved");let o=i.toString();e.replace(o?"/admin/home?".concat(o):"/admin/home")},2500);return()=>clearTimeout(o)},[e,i,t]),a)?(0,o.jsx)("div",{className:"fixed left-6 top-20 z-40 rounded-md border border-moss-600/60 bg-moss-800/90 px-4 py-3 text-sm text-mint-400 shadow-lg",children:"Изменения сохранены"}):null}}},function(t){t.O(0,[971,117,744],function(){return t(t.s=3590)}),_N_E=t.O()}]);